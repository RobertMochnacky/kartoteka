{% extends "base.html" %}
{% block content %}
<h2>Admin Panel: User Management</h2>
<a href="{{ url_for('auth.register') }}">Add New User</a>
<table>
  <tr>
    <th>ID</th>
    <th>Username</th>
    <th>Email</th>
    <th>Role</th>
    <th>Actions</th>
  </tr>
  {% for u in users %}
  <tr>
    <td>{{ u.id }}</td>
    <td>{{ u.username }}</td>
    <td>{{ u.email }}</td>
    <td>{{ u.role }}</td>
    <td>
      {% if u.role != 'admin' %}
        <a href="{{ url_for('auth.make_admin', user_id=u.id) }}">Promote</a>
      {% endif %}
      {% if u.role != 'user' %}
        <a href="{{ url_for('auth.make_user', user_id=u.id) }}">Demote</a>
      {% endif %}
      <a href="{{ url_for('auth.reset_password', user_id=u.id) }}">Reset Password</a>
      <a href="{{ url_for('auth.delete_user', user_id=u.id) }}" onclick="return confirm('Delete user?');">Delete</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
